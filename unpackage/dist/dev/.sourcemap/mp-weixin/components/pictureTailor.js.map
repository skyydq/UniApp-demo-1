{"version":3,"sources":["webpack:///F:/工无界/工无界-app/main.js","webpack:///F:/工无界/工无界-app/components/pictureTailor.vue?84ce","webpack:///F:/工无界/工无界-app/components/pictureTailor.vue?447b","webpack:///F:/工无界/工无界-app/components/pictureTailor.vue?843d","webpack:///F:/工无界/工无界-app/components/pictureTailor.vue?4da7","webpack:///F:/工无界/工无界-app/components/pictureTailor.vue","webpack:///F:/工无界/工无界-app/components/pictureTailor.vue?d0f5","webpack:///F:/工无界/工无界-app/components/pictureTailor.vue?cdc6"],"names":["createPage","Page","tailorSize","newOffsetX","newOffsetY","name","props","pictureSrc","data","offsetX","offsetY","img_width","img_height","img_scaling","scale","scaleMin","isShow","methods","onShow","onHide","getImgInfo","uni","getImageInfo","src","success","res","width","height","sysInfo","getSystemInfoSync","windowWidth","windowHeight","count","movableChange","e","detail","x","y","movableScale","createImg","ctx","createCanvasContext","drawImage","draw","canvasToTempFilePath","destWidth","destHeight","canvasId","console","log","tempFilePath","$emit"],"mappings":"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","file":"components/pictureTailor.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './components/pictureTailor.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./pictureTailor.vue?vue&type=template&id=e77a87c6&\"\nimport script from \"./pictureTailor.vue?vue&type=script&lang=js&\"\nexport * from \"./pictureTailor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pictureTailor.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('e77a87c6', component.options)\n    } else {\n      api.reload('e77a87c6', component.options)\n    }\n    module.hot.accept(\"./pictureTailor.vue?vue&type=template&id=e77a87c6&\", function () {\n      api.rerender('e77a87c6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/工无界/工无界-app/components/pictureTailor.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-hbuilderx\\\\packages\\\\webpack-uni-nvue-loader\\\\lib\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pictureTailor.vue?vue&type=template&id=e77a87c6&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pictureTailor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pictureTailor.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nlet tailorSize = 240; // 需要截取的尺寸240x240px，此变量要和样式中的240px和120px相对应，120px为此变量的一半，若要修改成其他值一定要一一对应\nlet\tnewOffsetX = 0; // 拖动缩放完成后的X轴偏移量\nlet newOffsetY = 0; // 拖动缩放完成后的Y轴偏移量\n\nexport default {\n\tname: \"pictureTailor\",\n\tprops: {\n\t\t// 图片路径\n\t\tpictureSrc:\"\"\n\t},\n\tdata() {\n\t\treturn {\n\t\t\toffsetX: 0, // 图像初始化的X轴偏移量\n\t\t\toffsetY: 0, // 图像初始化的Y轴偏移量\n\t\t\timg_width: 0, // 图片真实宽度\n\t\t\timg_height: 0, // 图片真实高度\n\t\t\timg_scaling: 1, //图片初始化缩放比例\n\t\t\tscale: 1, // 拖动缩放完成后的图片缩放比例\n\t\t\tscaleMin: 0.5, // 最小缩放值\n\t\t\tisShow: true\n\t\t};\n\t},\n\tmethods: {\n\t\t// 显示组件\n\t\tonShow() {\n\t\t\tthis.isShow = true;\n\t\t},\n\t\t// 隐藏组件\n\t\tonHide() {\n\t\t\tthis.isShow = false;\n\t\t},\n\t\t// 初始化图片\n\t\tgetImgInfo() {\n\t\t\tuni.getImageInfo({\n\t\t\t\tsrc: this.pictureSrc,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t// 图片宽高\n\t\t\t\t\tthis.img_width = res.width;\n\t\t\t\t\tthis.img_height = res.height;\n\t\t\t\t\t// 屏幕可用宽高\n\t\t\t\t\tlet sysInfo = uni.getSystemInfoSync();\n\t\t\t\t\tlet windowWidth = sysInfo.windowWidth;\n\t\t\t\t\tlet windowHeight = sysInfo.windowHeight;\n\t\t\t\t\t\n\t\t\t\t\t// 计算初始缩放比和最小缩放值\n\t\t\t\t\tif (this.img_width < tailorSize || this.img_height < tailorSize) { // 当图片宽或高小于240px时\n\t\t\t\t\t\tlet count = this.img_width <= this.img_height ? this.img_width : this.img_height;\n\t\t\t\t\t\tthis.img_scaling = count / tailorSize;\n\t\t\t\t\t\tthis.scaleMin = 1;\n\t\t\t\t\t} else if (this.img_width > windowWidth && this.img_width <= this.img_height) { // 当图片宽度大于屏幕宽度并且图片宽度小于图片高度时\n\t\t\t\t\t\tthis.img_scaling = this.img_width / windowWidth;\n\t\t\t\t\t\tthis.scaleMin = tailorSize / windowWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet count = this.img_width <= this.img_height ? this.img_width : this.img_height;\n\t\t\t\t\t\tthis.scaleMin = tailorSize / count;\n\t\t\t\t\t}\n\n\t\t\t\t\t// 计算图片居中显示时的偏移量\n\t\t\t\t\tthis.offsetX = -(this.img_width / this.img_scaling / 2 - tailorSize / 2);\n\t\t\t\t\tthis.offsetY = -(this.img_height / this.img_scaling / 2 - tailorSize / 2);\n\t\t\t\t\t// 获取新的偏移量\n\t\t\t\t\tnewOffsetX = this.offsetX;\n\t\t\t\t\tnewOffsetY = this.offsetY;\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 计算拖动偏移量\n\t\tmovableChange(e) {\n\t\t\tnewOffsetX = e.detail.x\n\t\t\tnewOffsetY = e.detail.y\n\t\t},\n\t\t// 计算缩放比例和偏移量\n\t\tmovableScale(e) {\n\t\t\tnewOffsetX = e.detail.x\n\t\t\tnewOffsetY = e.detail.y\n\t\t\tthis.scale = e.detail.scale;\n\t\t},\n\t\t// 截取图片\n\t\tcreateImg() {\n\t\t\tlet ctx = uni.createCanvasContext(\"picture-canvas\");\n\t\t\tctx.drawImage(this.pictureSrc, newOffsetX, newOffsetY, this.img_width /\n\t\t\t\tthis.img_scaling * this.scale,\n\t\t\t\tthis.img_height / this.img_scaling * this.scale);\n\t\t\tctx.draw(false, () => {\n\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\t// 截取图片尺寸\n\t\t\t\t\tdestWidth: tailorSize / 2,\n\t\t\t\t\tdestHeight: tailorSize / 2,\n\t\t\t\t\tcanvasId: \"picture-canvas\",\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log(res.tempFilePath)\n\t\t\t\t\t\tthis.onHide();\n\t\t\t\t\t\tthis.$emit(\"createImg\", res.tempFilePath);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}\n","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pictureTailor.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pictureTailor.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}